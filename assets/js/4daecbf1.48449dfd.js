"use strict";(self.webpackChunkdocs_rancherdesktop_io=self.webpackChunkdocs_rancherdesktop_io||[]).push([[8117],{3905:function(e,n,t){t.d(n,{Zo:function(){return p},kt:function(){return u}});var o=t(67294);function a(e,n,t){return n in e?Object.defineProperty(e,n,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[n]=t,e}function r(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);n&&(o=o.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,o)}return t}function i(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?r(Object(t),!0).forEach((function(n){a(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):r(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}function l(e,n){if(null==e)return{};var t,o,a=function(e,n){if(null==e)return{};var t,o,a={},r=Object.keys(e);for(o=0;o<r.length;o++)t=r[o],n.indexOf(t)>=0||(a[t]=e[t]);return a}(e,n);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);for(o=0;o<r.length;o++)t=r[o],n.indexOf(t)>=0||Object.prototype.propertyIsEnumerable.call(e,t)&&(a[t]=e[t])}return a}var s=o.createContext({}),d=function(e){var n=o.useContext(s),t=n;return e&&(t="function"==typeof e?e(n):i(i({},n),e)),t},p=function(e){var n=d(e.components);return o.createElement(s.Provider,{value:n},e.children)},c={inlineCode:"code",wrapper:function(e){var n=e.children;return o.createElement(o.Fragment,{},n)}},m=o.forwardRef((function(e,n){var t=e.components,a=e.mdxType,r=e.originalType,s=e.parentName,p=l(e,["components","mdxType","originalType","parentName"]),m=d(t),u=a,h=m["".concat(s,".").concat(u)]||m[u]||c[u]||r;return t?o.createElement(h,i(i({ref:n},p),{},{components:t})):o.createElement(h,i({ref:n},p))}));function u(e,n){var t=arguments,a=n&&n.mdxType;if("string"==typeof e||a){var r=t.length,i=new Array(r);i[0]=m;var l={};for(var s in n)hasOwnProperty.call(n,s)&&(l[s]=n[s]);l.originalType=e,l.mdxType="string"==typeof e?e:a,i[1]=l;for(var d=2;d<r;d++)i[d]=t[d];return o.createElement.apply(null,i)}return o.createElement.apply(null,t)}m.displayName="MDXCreateElement"},81568:function(e,n,t){t.r(n),t.d(n,{assets:function(){return s},contentTitle:function(){return i},default:function(){return h},frontMatter:function(){return r},metadata:function(){return l},toc:function(){return d}});var o=t(83117),a=(t(67294),t(3905));const r={title:"ODO and Rancher Desktop"},i=void 0,l={unversionedId:"how-to-guides/odo-rancher-desktop",id:"how-to-guides/odo-rancher-desktop",title:"ODO and Rancher Desktop",description:"odo is a fast, iterative and straightforward CLI tool for developers who write, build, and deploy applications on Kubernetes. The odo CLI abstracts away complex Kubernetes concepts and allows developers to focus on iterating code. The helper tool can detect changes to local code and deploy them to a container orchestrated cluster automatically, giving instant feedback to validate changes in real-time. Please refer to the odo project documentation to learn more.",source:"@site/docs/how-to-guides/odo-rancher-desktop.md",sourceDirName:"how-to-guides",slug:"/how-to-guides/odo-rancher-desktop",permalink:"/next/how-to-guides/odo-rancher-desktop",draft:!1,editUrl:"https://github.com/rancher-sandbox/docs.rancherdesktop.io/edit/main/docs/how-to-guides/odo-rancher-desktop.md",tags:[],version:"current",frontMatter:{title:"ODO and Rancher Desktop"},sidebar:"tutorialSidebar",previous:{title:"Running When Offline",permalink:"/next/how-to-guides/running-air-gapped"},next:{title:"Using the Traefik Ingress Controller",permalink:"/next/how-to-guides/traefik-ingress-example"}},s={},d=[{value:"Prerequisites",id:"prerequisites",level:2},{value:"Installation",id:"installation",level:3},{value:"Steps: <code>odo init</code>",id:"steps-odo-init",level:2},{value:"Steps: <code>odo dev</code>",id:"steps-odo-dev",level:2},{value:"Steps: <code>odo deploy</code>",id:"steps-odo-deploy",level:2},{value:"Steps: <code>odo describe component</code>",id:"steps-odo-describe-component",level:3},{value:"Steps: <code>odo delete component</code>",id:"steps-odo-delete-component",level:2}],p=e=>function(n){return console.warn("Component "+e+" was not imported, exported, or provided by MDXProvider as global scope"),(0,a.kt)("div",n)},c=p("Tabs"),m=p("TabItem"),u={toc:d};function h(e){let{components:n,...t}=e;return(0,a.kt)("wrapper",(0,o.Z)({},u,t,{components:n,mdxType:"MDXLayout"}),(0,a.kt)("p",null,(0,a.kt)("inlineCode",{parentName:"p"},"odo")," is a fast, iterative and straightforward CLI tool for developers who write, build, and deploy applications on Kubernetes. The ",(0,a.kt)("inlineCode",{parentName:"p"},"odo")," CLI abstracts away complex Kubernetes concepts and allows developers to focus on iterating code. The helper tool can detect changes to local code and deploy them to a container orchestrated cluster automatically, giving instant feedback to validate changes in real-time. Please refer to the ",(0,a.kt)("a",{parentName:"p",href:"https://odo.dev/docs/introduction"},(0,a.kt)("inlineCode",{parentName:"a"},"odo")," project documentation")," to learn more."),(0,a.kt)("h2",{id:"prerequisites"},"Prerequisites"),(0,a.kt)("p",null,"For this guide you will use the ",(0,a.kt)("a",{parentName:"p",href:"https://github.com/rancher-sandbox/docs.rancherdesktop.io/tree/main/assets/express-sample"},"express-sample node.js application")," in the ",(0,a.kt)("a",{parentName:"p",href:"https://github.com/rancher-sandbox/docs.rancherdesktop.io"},"Rancher Desktop documentation")," repository as a way to demonstrate the use of ",(0,a.kt)("inlineCode",{parentName:"p"},"odo")," and Rancher Desktop."),(0,a.kt)("admonition",{type:"note"},(0,a.kt)("p",{parentName:"admonition"},(0,a.kt)("inlineCode",{parentName:"p"},"odo")," works with the ",(0,a.kt)("inlineCode",{parentName:"p"},"dockerd (moby)")," runtime, be sure to have it selected from the preferences dialog location ",(0,a.kt)("em",{parentName:"p"},"Preferences")," > ",(0,a.kt)("em",{parentName:"p"},"Container Engine")," > ",(0,a.kt)("em",{parentName:"p"},"Allowed Images"),".")),(0,a.kt)("p",null,"Please ensure that Kubernetes is enabled for your application. Additionally, in order to use ",(0,a.kt)("inlineCode",{parentName:"p"},"odo deploy"),", you will need to be able to build and push an image to a Docker container registry. Log in using your Docker credentials as noted below:"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-shell"},"$ docker login docker.io\nUsername:\nPassword:\nLogin Succeeded!\n")),(0,a.kt)("h3",{id:"installation"},"Installation"),(0,a.kt)("p",null,"Install ",(0,a.kt)("inlineCode",{parentName:"p"},"odo")," by visiting ",(0,a.kt)("a",{parentName:"p",href:"https://odo.dev/docs/overview/installation"},"https://odo.dev/docs/overview/installation")," and perform the appropriate install for your platform. The tool can be used both as a ",(0,a.kt)("a",{parentName:"p",href:"https://odo.dev/docs/overview/installation#cli-installation"},"CLI tool")," or an ",(0,a.kt)("a",{parentName:"p",href:"https://odo.dev/docs/overview/installation#ide-installation"},"IDE plugin"),", as well as a few ",(0,a.kt)("a",{parentName:"p",href:"https://odo.dev/docs/overview/installation#alternative-installation-methods"},"alternative install methods")," depending on your preference. This guide will focus on using the tool through the CLI."),(0,a.kt)("h2",{id:"steps-odo-init"},"Steps: ",(0,a.kt)("inlineCode",{parentName:"h2"},"odo init")),(0,a.kt)("p",null,"This command will initialize the application by creating a ",(0,a.kt)("inlineCode",{parentName:"p"},"devfile.yaml")," for deployments."),(0,a.kt)("ol",null,(0,a.kt)("li",{parentName:"ol"},"Clone the ",(0,a.kt)("a",{parentName:"li",href:"https://github.com/rancher-sandbox/docs.rancherdesktop.io"},"Rancher Desktop documentation")," repository and change your directory to the ",(0,a.kt)("a",{parentName:"li",href:"https://github.com/rancher-sandbox/docs.rancherdesktop.io/tree/main/assets/express-sample"},"sample-express")," application.")),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-shell"},"git clone https://github.com/rancher-sandbox/docs.rancherdesktop.io.git\ncd docs.rancherdesktop.io/assets/express-sample\n")),(0,a.kt)("ol",{start:2},(0,a.kt)("li",{parentName:"ol"},"Before initializing, you must connect ",(0,a.kt)("inlineCode",{parentName:"li"},"odo")," to your cluster via a namespace, which can be created with the command ",(0,a.kt)("a",{parentName:"li",href:"https://odo.dev/docs/command-reference/create-namespace"},(0,a.kt)("inlineCode",{parentName:"a"},"odo create namespace <name>")),":")),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-shell"},"odo create namespace odo-dev\n")),(0,a.kt)("details",null,(0,a.kt)("summary",null,"Sample Output"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-shell"},'$ odo create namespace odo-dev\n \u2713  Creating the namespace "odo-dev" [5ms]\n \u2713  Namespace "odo-dev" is ready for use\n \u2713  New namespace created and now using namespace: odo-dev\n'))),(0,a.kt)("ol",{start:3},(0,a.kt)("li",{parentName:"ol"},(0,a.kt)("p",{parentName:"li"},"The command ",(0,a.kt)("a",{parentName:"p",href:"https://odo.dev/docs/command-reference/init"},(0,a.kt)("inlineCode",{parentName:"a"},"odo init"))," will auto-detect your project framework and choose the appropriate ",(0,a.kt)("inlineCode",{parentName:"p"},"devfile.yaml")," to be used for deployment of your application. The command will allow you to confirm the Devfile (Y/n), select a container to change configuration (choose none for this example), and enter a component name (e.g. my-nodejs-app)."),(0,a.kt)("p",{parentName:"li"},"Alternatively, the following command with the additional flags (e.g. ",(0,a.kt)("inlineCode",{parentName:"p"},"--devfile-version 2.2.0"),") can be used to initialize ",(0,a.kt)("inlineCode",{parentName:"p"},"odo")," and allow your application to be deployed:"))),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-shell"},"odo init --name my-nodejs-app --devfile nodejs --devfile-registry DefaultDevfileRegistry --devfile-version 2.2.0\n")),(0,a.kt)("details",null,(0,a.kt)("summary",null,"Sample Output"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-shell"},"  __\n /  \\__     Initializing a new component\n \\__/  \\    \n /  \\__/    odo version: v3.13.0\n \\__/\n\n \u2713  Downloading devfile \"nodejs:2.2.0\" from registry \"DefaultDevfileRegistry\" [1s]\n\nYour new component 'my-nodejs-app' is ready in the current directory.\nTo start editing your component, use 'odo dev' and open this folder in your favorite IDE.\nChanges will be directly reflected on the cluster.\n"))),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-shell"},"odo init\n")),(0,a.kt)("details",null,(0,a.kt)("summary",null,"Sample Output"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-shell"},'$ odo init\n  __\n /  \\__     Initializing a new component\n \\__/  \\    Files: Source code detected, a Devfile will be determined based upon source code autodetection\n /  \\__/    odo version: v3.13.0\n \\__/\n\nInteractive mode enabled, please answer the following questions:\n \u2713  Determining a Devfile for the current directory [910ms]\nBased on the files in the current directory odo detected\nLanguage: JavaScript\nProject type: Node.js\nApplication ports: 3000\nThe devfile "nodejs:2.1.1" from the registry "DefaultDevfileRegistry" will be downloaded.\n? Is this correct? Yes\n \u2713  Downloading devfile "nodejs:2.1.1" from registry "DefaultDevfileRegistry" [933ms]\n\n\u21aa Container Configuration "runtime":\n  OPEN PORTS:\n    - 3000\n    - 5858\n  ENVIRONMENT VARIABLES:\n    - DEBUG_PORT = 5858\n\n? Select container for which you want to change configuration? NONE - configuration is correct\n? Enter component name: my-nodejs-app\n\nYou can automate this command by executing:\n   odo init --name my-nodejs-app --devfile nodejs --devfile-registry DefaultDevfileRegistry --devfile-version 2.1.1\n\nYour new component \'my-nodejs-app\' is ready in the current directory.\nTo start editing your component, use \'odo dev\' and open this folder in your favorite IDE.\nChanges will be directly reflected on the cluster.\n'))),(0,a.kt)("h2",{id:"steps-odo-dev"},"Steps: ",(0,a.kt)("inlineCode",{parentName:"h2"},"odo dev")),(0,a.kt)("p",null,"Now, you can run the command ",(0,a.kt)("a",{parentName:"p",href:"https://odo.dev/docs/command-reference/dev"},(0,a.kt)("inlineCode",{parentName:"a"},"odo dev"))," to continuously deploy applications as you make changes to your code through your preferred IDE."),(0,a.kt)("admonition",{type:"caution"},(0,a.kt)("p",{parentName:"admonition"},"You may run into an ",(0,a.kt)("inlineCode",{parentName:"p"},"ErrImagePull")," error as the image may not be covered by Rancher Desktop's allowed images list. To resolve the error, please add the necessary image in ",(0,a.kt)("em",{parentName:"p"},"Preferences")," > ",(0,a.kt)("em",{parentName:"p"},"Container Engine")," > ",(0,a.kt)("em",{parentName:"p"},"Allowed Images")," and hit apply to update allowed images immediately.")),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-shell"},"odo dev\n")),(0,a.kt)("details",null,(0,a.kt)("summary",null,"Sample Output"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-shell"},'$ odo dev\n  __\n /  \\__     Developing using the "my-nodejs-app" Devfile\n \\__/  \\    Namespace: odo-dev\n /  \\__/    odo version: v3.13.0\n \\__/\n\n\u21aa Running on the cluster in Dev mode\nI0728 13:50:53.115137   92567 starterserver.go:123] API Server started at localhost:20000/api/v1\n \u2022  Waiting for Kubernetes resources  ...\n \u26a0  Pod is Pending\n \u2713  Pod is Running\n \u2713  Syncing files into the container [306ms]\n \u2713  Building your application in container (command: install) [3s]\n \u2022  Executing the application (command: run)  ...\n \u2713  Waiting for the application to be ready [1s]\n -  Forwarding from 127.0.0.1:20001 -> 3000\n\n\n\u21aa Dev mode\n Status:\n Watching for changes in the current directory /Users/docs.rancherdesktop.io/assets/express-sample\n\n Keyboard Commands:\n[Ctrl+c] - Exit and delete resources from the cluster\n     [p] - Manually apply local changes to the application on the cluster\n'))),(0,a.kt)("p",null,"The ",(0,a.kt)("inlineCode",{parentName:"p"},"express-sample")," application can now be accessed by the local port (127.0.0.1:20001). As an example, you can make a text change to the ",(0,a.kt)("inlineCode",{parentName:"p"},"index.jade")," file in the ",(0,a.kt)("em",{parentName:"p"},"views")," folder to see a real-time update to the application."),(0,a.kt)("h2",{id:"steps-odo-deploy"},"Steps: ",(0,a.kt)("inlineCode",{parentName:"h2"},"odo deploy")),(0,a.kt)("p",null,"This command will deploy your application to your cluster with instructions from your ",(0,a.kt)("inlineCode",{parentName:"p"},"devfile.yaml"),"."),(0,a.kt)("ol",null,(0,a.kt)("li",{parentName:"ol"},"Be sure to be logged into the Docker container registry to push the application to, and set your container image build arguments to be the same as your container architecture using the ",(0,a.kt)("a",{parentName:"li",href:"https://odo.dev/docs/overview/configure/#environment-variables-controlling-odo-behavior:~:text=ODO_IMAGE_BUILD_ARGS"},(0,a.kt)("inlineCode",{parentName:"a"},"ODO_IMAGE_BUILD_ARGS"))," environment variable:")),(0,a.kt)(c,{mdxType:"Tabs"},(0,a.kt)(m,{value:"AMD64",mdxType:"TabItem"},(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-shell"},'export ODO_IMAGE_BUILD_ARGS="--platform=linux/amd64"\n'))),(0,a.kt)(m,{value:"ARM",mdxType:"TabItem"},(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-shell"},'export ODO_IMAGE_BUILD_ARGS="--platform=linux/arm64"\n')))),(0,a.kt)("ol",{start:2},(0,a.kt)("li",{parentName:"ol"},"Update the ",(0,a.kt)("inlineCode",{parentName:"li"},"Dockerfile")," in the ",(0,a.kt)("inlineCode",{parentName:"li"},"express-sample")," directory to containerize the application with correct variables in order to build and push to a registry:")),(0,a.kt)("details",null,(0,a.kt)("summary",null,"Sample Dockerfile"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-shell"},'# Install the app dependencies in a full SLE Node image\nFROM registry.suse.com/bci/nodejs:16\n\n# Copy package.json and package-lock.json\nCOPY package*.json ./\n\n# Install app dependencies\nRUN npm install --production\n\n# Install app dependencies\nCOPY . /opt/app-root/src\n\nENV NODE_ENV production\nENV PORT 3000\n\nCMD ["npm", "start"]\n'))),(0,a.kt)("ol",{start:3},(0,a.kt)("li",{parentName:"ol"},"Modify the ",(0,a.kt)("inlineCode",{parentName:"li"},"devfile.yaml")," to the example noted below for your container cluster.")),(0,a.kt)("ul",null,(0,a.kt)("li",{parentName:"ul"},"Update the variables to access your container registry:")),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-yaml"},'# Add the following variables code anywhere in devfile.yaml\n# This MUST be a container registry you are able to access\nvariables:\n  CONTAINER_IMAGE: docker.io/<INSERTUSERNAME>/nodejs-odo-example\n  RESOURCE_NAME: my-nodejs-app\n  CONTAINER_PORT: "3000"\n  DOMAIN_NAME: nodejs.example.com\n')),(0,a.kt)("ul",null,(0,a.kt)("li",{parentName:"ul"},"Update the Devfile schema to ",(0,a.kt)("inlineCode",{parentName:"li"},"2.2.0")," as ",(0,a.kt)("inlineCode",{parentName:"li"},"odo deploy")," makes use of this version. Additionally, there is a command to initialize ",(0,a.kt)("inlineCode",{parentName:"li"},"odo")," with the correct ",(0,a.kt)("inlineCode",{parentName:"li"},"schemaVersion: 2.2.0")," noted above in the installation:")),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-yaml"},'# Deploy "kind" ID\'s use schema 2.2.0+\nschemaVersion: 2.2.0\n')),(0,a.kt)("ul",null,(0,a.kt)("li",{parentName:"ul"},"The commands seen below are used for deployment activities:")),(0,a.kt)("details",null,(0,a.kt)("summary",null,"Deployment Commands"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-yaml"},'# This is the main "composite" command that will run all below commands\ncommands:\n- id: deploy\n  composite:\n    commands:\n    - build-image\n    - k8s-deployment\n    - k8s-service\n    - k8s-url\n    group:\n      isDefault: true\n      kind: deploy\n\n# Below are the commands and their respective components that they are "linked" to deploy\n- id: build-image\n  apply:\n    component: outerloop-build\n- id: k8s-deployment\n  apply:\n    component: outerloop-deployment\n- id: k8s-service\n  apply:\n    component: outerloop-service\n- id: k8s-url\n  apply:\n    component: outerloop-url\n'))),(0,a.kt)("ul",null,(0,a.kt)("li",{parentName:"ul"},"The commands seen below are used for adding the Docker image location, K8s deployment and services to ",(0,a.kt)("inlineCode",{parentName:"li"},"components"),":")),(0,a.kt)("details",null,(0,a.kt)("summary",null,"Component Commands"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-yaml"},'# This will build the container image before deployment\n- name: outerloop-build\n  image:\n    dockerfile:\n      buildContext: ${PROJECT_SOURCE}\n      rootRequired: false\n      uri: ./Dockerfile\n    imageName: "{{CONTAINER_IMAGE}}"\n# This will create a Deployment in order to run your container image across\n# the cluster.\n- name: outerloop-deployment\n  kubernetes:\n    inlined: |\n      kind: Deployment\n      apiVersion: apps/v1\n      metadata:\n        name: {{RESOURCE_NAME}}\n      spec:\n        replicas: 1\n        selector:\n          matchLabels:\n            app: {{RESOURCE_NAME}}\n        template:\n          metadata:\n            labels:\n              app: {{RESOURCE_NAME}}\n          spec:\n            containers:\n              - name: {{RESOURCE_NAME}}\n                image: {{CONTAINER_IMAGE}}\n                ports:\n                  - name: http\n                    containerPort: {{CONTAINER_PORT}}\n                    protocol: TCP\n                resources:\n                  limits:\n                    memory: "1024Mi"\n                    cpu: "500m"\n\n# This will create a Service so your Deployment is accessible.\n# Depending on your cluster, you may modify this code so it\'s a\n# NodePort, ClusterIP or a LoadBalancer service.\n- name: outerloop-service\n  kubernetes:\n    inlined: |\n      apiVersion: v1\n      kind: Service\n      metadata:\n        name: {{RESOURCE_NAME}}\n      spec:\n        ports:\n        - name: "{{CONTAINER_PORT}}"\n          port: {{CONTAINER_PORT}}\n          protocol: TCP\n          targetPort: {{CONTAINER_PORT}}\n        selector:\n          app: {{RESOURCE_NAME}}\n        type: NodePort\n'))),(0,a.kt)("ul",null,(0,a.kt)("li",{parentName:"ul"},"The last addition to our Devfile is adding the Kubernetes ingress component as noted below:")),(0,a.kt)("details",null,(0,a.kt)("summary",null,"Ingress Commands"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-yaml"},'- name: outerloop-url\n  kubernetes:\n    inlined: |\n      apiVersion: networking.k8s.io/v1\n      kind: Ingress\n      metadata:\n        name: {{RESOURCE_NAME}}\n      spec:\n        rules:\n          - host: "{{DOMAIN_NAME}}"\n            http:\n              paths:\n                - path: "/"\n                  pathType: Prefix\n                  backend:\n                    service:\n                      name: {{RESOURCE_NAME}}\n                      port:\n                        number: {{CONTAINER_PORT}}\n'))),(0,a.kt)("ul",null,(0,a.kt)("li",{parentName:"ul"},"Below is the example ",(0,a.kt)("inlineCode",{parentName:"li"},"devfile.yaml")," that you can use to help illustrate command and variable settings after they are all put together. Please review your Devfile to match or update the appropriate variables as noted below:")),(0,a.kt)("details",null,(0,a.kt)("summary",null,"Final Devfile"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-yaml"},'commands:\n- exec:\n    commandLine: npm install\n    component: runtime\n    group:\n      isDefault: true\n      kind: build\n    workingDir: ${PROJECT_SOURCE}\n  id: install\n- exec:\n    commandLine: npm start\n    component: runtime\n    group:\n      isDefault: true\n      kind: run\n    workingDir: ${PROJECT_SOURCE}\n  id: run\n- exec:\n    commandLine: npm run debug\n    component: runtime\n    group:\n      isDefault: true\n      kind: debug\n    workingDir: ${PROJECT_SOURCE}\n  id: debug\n- exec:\n    commandLine: npm test\n    component: runtime\n    group:\n      isDefault: true\n      kind: test\n    workingDir: ${PROJECT_SOURCE}\n  id: test\n# This is the main "composite" command that will run all below commands\n- id: deploy\n  composite:\n    commands:\n    - build-image\n    - k8s-deployment\n    - k8s-service\n    - k8s-url\n    group:\n      isDefault: true\n      kind: deploy\n# Below are the commands and their respective components that they are "linked" to deploy\n- id: build-image\n  apply:\n    component: outerloop-build\n- id: k8s-deployment\n  apply:\n    component: outerloop-deployment\n- id: k8s-service\n  apply:\n    component: outerloop-service\n- id: k8s-url\n  apply:\n    component: outerloop-url\ncomponents:\n- container:\n    args:\n    - tail\n    - -f\n    - /dev/null\n    endpoints:\n    - name: http-node\n      targetPort: 3000\n    - exposure: none\n      name: debug\n      targetPort: 5858\n    env:\n    - name: DEBUG_PORT\n      value: "5858"\n    image: registry.suse.com/bci/nodejs:16:latest\n    memoryLimit: 1024Mi\n    mountSources: true\n  name: runtime\n# This will build the container image before deployment\n- name: outerloop-build\n  image:\n    dockerfile:\n      buildContext: ${PROJECT_SOURCE}\n      rootRequired: false\n      uri: ./Dockerfile\n    imageName: "{{CONTAINER_IMAGE}}"\n# This will create a Deployment in order to run your container image across\n# the cluster.\n- name: outerloop-deployment\n  kubernetes:\n    inlined: |\n      kind: Deployment\n      apiVersion: apps/v1\n      metadata:\n        name: {{RESOURCE_NAME}}\n      spec:\n        replicas: 1\n        selector:\n          matchLabels:\n            app: {{RESOURCE_NAME}}\n        template:\n          metadata:\n            labels:\n              app: {{RESOURCE_NAME}}\n          spec:\n            containers:\n              - name: {{RESOURCE_NAME}}\n                image: {{CONTAINER_IMAGE}}\n                ports:\n                  - name: http\n                    containerPort: {{CONTAINER_PORT}}\n                    protocol: TCP\n                resources:\n                  limits:\n                    memory: "1024Mi"\n                    cpu: "500m"\n\n# This will create a Service so your Deployment is accessible.\n# Depending on your cluster, you may modify this code so it\'s a\n# NodePort, ClusterIP or a LoadBalancer service.\n- name: outerloop-service\n  kubernetes:\n    inlined: |\n      apiVersion: v1\n      kind: Service\n      metadata:\n        name: {{RESOURCE_NAME}}\n      spec:\n        ports:\n        - name: "{{CONTAINER_PORT}}"\n          port: {{CONTAINER_PORT}}\n          protocol: TCP\n          targetPort: {{CONTAINER_PORT}}\n        selector:\n          app: {{RESOURCE_NAME}}\n        type: NodePort\n- name: outerloop-url\n  kubernetes:\n    inlined: |\n      apiVersion: networking.k8s.io/v1\n      kind: Ingress\n      metadata:\n        name: {{RESOURCE_NAME}}\n      spec:\n        rules:\n          - host: "{{DOMAIN_NAME}}"\n            http:\n              paths:\n                - path: "/"\n                  pathType: Prefix\n                  backend:\n                    service:\n                      name: {{RESOURCE_NAME}}\n                      port:\n                        number: {{CONTAINER_PORT}}\nmetadata:\n  description: Stack with Node.js 16\n  displayName: Node.js Runtime\n  icon: https://nodejs.org/static/images/logos/nodejs-new-pantone-black.svg\n  language: JavaScript\n  name: my-node-app\n  projectType: Node.js\n  tags:\n  - Node.js\n  - Express\n  - ubi8\n  version: 2.1.1\nschemaVersion: 2.2.0\nstarterProjects:\n- git:\n    remotes:\n      origin: https://github.com/odo-devfiles/nodejs-ex.git\n  name: nodejs-starter\n# Add the following variables code anywhere in devfile.yaml\n# This MUST be a container registry you are able to access\nvariables:\n  CONTAINER_IMAGE: docker.io/<INSERTUSERNAME>/node-odo-example\n  RESOURCE_NAME: my-node-app\n  CONTAINER_PORT: "3000"\n  DOMAIN_NAME: node.example.com\n'))),(0,a.kt)("ol",{start:4},(0,a.kt)("li",{parentName:"ol"},"Now, you can run the command ",(0,a.kt)("a",{parentName:"li",href:"https://odo.dev/docs/command-reference/deploy"},(0,a.kt)("inlineCode",{parentName:"a"},"odo deploy"))," to deploy the application to the cluster:")),(0,a.kt)("admonition",{type:"caution"},(0,a.kt)("p",{parentName:"admonition"},"You may run into an ",(0,a.kt)("inlineCode",{parentName:"p"},"unauthorized: image")," error as the image may not be covered by Rancher Desktop's allowed images list. To resolve the error, please add the necessary image in ",(0,a.kt)("em",{parentName:"p"},"Preferences")," > ",(0,a.kt)("em",{parentName:"p"},"Container Engine")," > ",(0,a.kt)("em",{parentName:"p"},"Allowed Images")," and hit apply to update allowed images immediately.")),(0,a.kt)("details",null,(0,a.kt)("summary",null,"Sample Output"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-shell"},"$ odo deploy\n  __\n /  \\__     Running the application in Deploy mode using my-node-app Devfile\n \\__/  \\    Namespace: odo-dev\n /  \\__/    odo version: v3.13.0\n \\__/\n\n\u21aa Building & Pushing Image: docker.io/arjsin/nodejs-odo-example\n \u2022  Building image locally  ...\n[+] Building 2.7s (9/9) FINISHED                                                \n => [internal] load build definition from Dockerfile                       0.0s\n => => transferring dockerfile: 405B                                       0.0s\n => [internal] load .dockerignore                                          0.0s\n => => transferring context: 364B                                          0.0s\n => [internal] load metadata for registry.suse.com/bci/nodejs:16           2.2s\n => [1/4] FROM registry.suse.com/bci/nodejs:16@sha256:dda0e616a0fcb3dc589  0.0s\n => [internal] load build context                                          0.0s\n => => transferring context: 5.14kB                                        0.0s\n => CACHED [2/4] COPY package*.json ./                                     0.0s\n => CACHED [3/4] RUN npm install --production                              0.0s\n => [4/4] COPY . /opt/app-root/src                                         0.0s\n => exporting to image                                                     0.4s\n => => exporting layers                                                    0.4s\n => => writing image sha256:c6d3ed7d9fb4736d3c4e95b54054533f79d64d3a01e65  0.0s\n => => naming to docker.io/arjsin/nodejs-odo-example                       0.0s\n \u2713  Building image locally [3s]\n \u2022  Pushing image to container registry  ...\nUsing default tag: latest\nThe push refers to repository [docker.io/arjsin/nodejs-odo-example]\n20658d9b13ba: Pushed \n7b1ee26c3aea: Pushed \n067890bef08d: Pushed \nd08e96dfc7bc: Pushed \n174c0e293bd0: Pushed \nlatest: digest: sha256:ca598fc0c5278e8d00cba41e14914f1d3f7a3561bd4a324f2ffcd33b166135ad size: 1368\n \u2713  Pushing image to container registry [30s]\n\n\u21aa Deploying Kubernetes Component: my-node-app\n \u2713  Creating resource Deployment/my-node-app \n\n\u21aa Deploying Kubernetes Component: my-node-app\n \u2713  Creating resource Service/my-node-app \n\n\u21aa Deploying Kubernetes Component: my-node-app\n \u2713  Creating resource Ingress/my-node-app \n\nYour Devfile has been successfully deployed\n"))),(0,a.kt)("h3",{id:"steps-odo-describe-component"},"Steps: ",(0,a.kt)("inlineCode",{parentName:"h3"},"odo describe component")),(0,a.kt)("p",null,"Now, the command ",(0,a.kt)("a",{parentName:"p",href:"https://odo.dev/docs/command-reference/describe-component"},(0,a.kt)("inlineCode",{parentName:"a"},"odo describe component"))," can be used to view information from the Devfile such as Kubernetes components, ingresses, and the URL to access the application:"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-shell"},"odo describe component\n")),(0,a.kt)("details",null,(0,a.kt)("summary",null,"Sample Output"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-shell"},'$ odo describe component\nName: my-nodejs-app\nDisplay Name: Node.js Runtime\nProject Type: Node.js\nLanguage: JavaScript\nVersion: 2.2.0\nDescription: Node.js 18 application\nTags: Node.js, Express, ubi8\n\nRunning in: None\n\nSupported odo features:\n \u2022  Dev: true\n \u2022  Deploy: false\n \u2022  Debug: true\n\nCommands:\n \u2022  install\n      Type: exec\n      Group: build\n      Command Line: "npm install"\n      Component: runtime\n      Component Type: container\n \u2022  run\n      Type: exec\n      Group: run\n      Command Line: "npm start"\n      Component: runtime\n      Component Type: container\n \u2022  debug\n      Type: exec\n      Group: debug\n      Command Line: "npm run debug"\n      Component: runtime\n      Component Type: container\n \u2022  test\n      Type: exec\n      Group: test\n      Command Line: "npm test"\n      Component: runtime\n      Component Type: container\n\nContainer components:\n \u2022  runtime\n    Source Mapping: /projects\n'))),(0,a.kt)("h2",{id:"steps-odo-delete-component"},"Steps: ",(0,a.kt)("inlineCode",{parentName:"h2"},"odo delete component")),(0,a.kt)("p",null,"After you have completed testing, you can free the resources used by ",(0,a.kt)("inlineCode",{parentName:"p"},"odo")," by using the command ",(0,a.kt)("a",{parentName:"p",href:"https://odo.dev/docs/command-reference/delete-component"},(0,a.kt)("inlineCode",{parentName:"a"},"odo delete component")),":"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-shell"},"odo delete component\n")),(0,a.kt)("details",null,(0,a.kt)("summary",null,"Sample Output"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-shell"},'$ odo delete component\nSearching resources to delete, please wait...\nThis will delete "my-node-app" from the namespace "odo-dev".\n \u2022  The following resources will get deleted from cluster:\n \u2022      - Deployment: my-node-app\n \u2022      - Service: my-node-app\n \u2022      - Ingress: my-node-app\n\n? Are you sure you want to delete "my-node-app" and all its resources? Yes\n \u2713  Deleting resources from cluster [52ms]\nThe component "my-node-app" is successfully deleted from namespace "odo-dev"\n'))))}h.isMDXComponent=!0}}]);